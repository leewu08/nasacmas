{# templates/report.html #}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{{ unit_name }} 리포트</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    h1 { color: #333; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .section { margin-top: 40px; }
  </style>
</head>
<body>
  <!-- 1) 헤더: 템플릿 변수로 넘어온 unit_name, created_at -->
  <h1>{{ unit_name }} 예지보전 리포트</h1>
  <p><strong>리포트 생성일:</strong> {{ created_at }}</p>

  <!-- 2) 설비 개요 섹션 -->
  <div class="section">
    <h2>1. 설비 개요</h2>
    <p><strong>설비 ID:</strong> {{ unit_id }}</p>
    <p><strong>상태 등급:</strong> {{ status_grade }}</p>
    <p><strong>예상 잔여 수명 (RUL):</strong> {{ rul }} 일</p>
  </div>

  <!-- 3) SHAP 중요도 테이블 -->
  <div class="section">
    <h2>2. 주요 센서 중요도 (SHAP 기반)</h2>
    <table>
      <thead>
        <tr><th>센서명</th><th>중요도 점수</th></tr>
      </thead>
      <tbody>
      {% for s in shap_importance %}
        <tr>
          <td>{{ s.name }}</td>
          <td>{{ '%.4f'|format(s.value) }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- 4) 점검 이력 테이블 -->
  <div class="section">
    <h2>3. 최근 점검 이력</h2>
    <table>
      <thead>
        <tr><th>일자</th><th>점검내용</th><th>담당자</th></tr>
      </thead>
      <tbody>
      {% for log in inspection_log %}
        <tr>
          <td>{{ log.date }}</td>
          <td>{{ log.desc }}</td>
          <td>{{ log.staff }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
